(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{385:function(s,t,n){"use strict";n.r(t);var a=n(42),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"processing-model"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#processing-model"}},[s._v("#")]),s._v(" Processing Model")]),s._v(" "),n("p",[s._v("æˆ‘ä»¬çŸ¥é“"),n("code",[s._v("javascript")]),s._v("æ˜¯å•çº¿ç¨‹, ä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­æ— æ³•é¿å…çš„è¦ä½¿ç”¨åˆ°å¼‚æ­¥æ“ä½œ")]),s._v(" "),n("p",[s._v("e.g: "),n("code",[s._v("xhrè¯·æ±‚")]),s._v(", "),n("code",[s._v("click event")]),s._v(", "),n("code",[s._v("timout")]),s._v("...")]),s._v(" "),n("p",[s._v("æ—¢ç„¶"),n("code",[s._v("javascript")]),s._v("å­˜åœ¨ä¸€äº›å¼‚æ­¥API, é‚£ä¹ˆ"),n("strong",[s._v("jså¼•æ“")]),s._v("å¦‚ä½•è°ƒåº¦åŒæ­¥è„šæœ¬å’Œå¼‚æ­¥è„šæœ¬å°±æˆä¸ºäº†ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜")]),s._v(" "),n("p",[n("strong",[s._v("jså¼•æ“")]),s._v("å¯¹åŒæ­¥/å¼‚æ­¥è„šæœ¬çš„è°ƒåº¦è¿‡ç¨‹å°±æ˜¯æœ¬ç« è¦è®²è¿°çš„"),n("code",[s._v("Processing Model")]),s._v(", ä¹Ÿå°±æ˜¯å¸¸è¯´çš„"),n("code",[s._v("Event Loop")])]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("- æ³¨æ„")]),s._v(" "),n("p",[s._v("æœ¬ç¯‡å¦‚æœæ²¡æœ‰ç‰¹æ„æåŠéƒ½æ˜¯æŒ‡ æµè§ˆå™¨å¼•æ“çš„"),n("code",[s._v("Event Loop")])]),s._v(" "),n("p",[s._v("å¯¹äºNodeç¯å¢ƒä¸‹çš„"),n("code",[s._v("Event Loop")]),s._v(", æ²¡æœ‰åšè¿‡è¯¦ç»†çš„å­¦ä¹ , ç›®å‰æš‚ä¸æåŠ")])]),s._v(" "),n("p",[s._v("çœ‹ä¸€ä¸‹ä¸‹é¢çš„ğŸŒ° (è¿™æ˜¯å¤§å­¦çš„æ—¶å€™é¢è¯•ä»Šæ—¥å¤´æ¡çš„ä¸€ä¸ªé¢è¯•é¢˜, ä¹Ÿæ˜¯é€šè¿‡è¿™ä¸ªé¢è¯•é¢˜æ‰å¯¹"),n("code",[s._v("Event Loop")]),s._v("æœ‰äº†æ·±å…¥çš„å­¦ä¹ )")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å†™å‡ºè¾“å‡ºé¡ºåº")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async1 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async2 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'setTimeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Promise'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œç›´æ¥ç»™å‡ºç­”æ¡ˆ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script start")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// async2 end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Promise")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// async1 end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// promise1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// promise2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// setTimeout")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("p",[s._v("å¦‚æœä½ èƒ½å¯¹ä¸Šé¢çš„é¡ºåºç»™å‡ºåˆç†çš„è§£é‡Š, æˆ‘ç›¸ä¿¡ä½ å·²ç»æŒæ¡"),n("code",[s._v("Event Loop")]),s._v("äº†, ä½†æ˜¯æˆ‘è¿˜æ˜¯å»ºè®®ä½ çœ‹é˜…è¯»ä¸€ä¸‹")]),s._v(" "),n("ul",[n("li",[n("p",[n("RouterLink",{attrs:{to:"/browser/processing_model.html#ui-render"}},[s._v("UI Render")])],1)]),s._v(" "),n("li",[n("p",[n("RouterLink",{attrs:{to:"/browser/processing_model.html#settimeout-setinterval-requsetanimationframeå·®å¼‚"}},[s._v("setTimeout...")])],1)])]),s._v(" "),n("p",[s._v("å¯èƒ½ä½ ä¼šå¾—åˆ°ä¸€äº›é¢å¤–çš„æ”¶è·")]),s._v(" "),n("h2",{attrs:{id:"event-loop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#event-loop"}},[s._v("#")]),s._v(" Event Loop")]),s._v(" "),n("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯event-loop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯event-loop"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯Event Loop")]),s._v(" "),n("p",[s._v("å‰é¢æåˆ°äº†"),n("code",[s._v("Event Loop")]),s._v("å°±æ˜¯"),n("strong",[s._v("jså¼•æ“")]),s._v("å¯¹åŒæ­¥/å¼‚æ­¥ä»»åŠ¡çš„è°ƒåº¦ç®—æ³•")]),s._v(" "),n("p",[s._v("å¦‚æœä½ çš„è‹±æ–‡èƒ½åŠ›å¯ä»¥çš„è¯, æˆ‘æ¨èä½ é˜…è¯»"),n("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model",target:"_blank",rel:"noopener noreferrer"}},[s._v("event-loop-process-model-standard"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("æˆ–è€…ä½ ä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹è¿™ç¯‡æ–‡ç« "),n("a",{attrs:{href:"https://github.com/aooy/blog/issues/5",target:"_blank",rel:"noopener noreferrer"}},[s._v("ä»event loopè§„èŒƒæ¢ç©¶javaScriptå¼‚æ­¥åŠæµè§ˆå™¨æ›´æ–°æ¸²æŸ“æ—¶æœº"),n("OutboundLink")],1),s._v(", è¿™ç¯‡æ–‡ç« å†…æœ‰å¯¹ä¸Šè¿°æ ‡å‡†çš„ç¿»è¯‘")]),s._v(" "),n("p",[s._v("å¯¹äº"),n("strong",[s._v("macrotask queue")]),s._v("å’Œ"),n("strong",[s._v("microtask queue")]),s._v("è¿™é‡Œä¸åšè¿‡å¤šèµ˜è¿°")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("è¿™é‡Œä»‹ç»å‡ ä¸ªH5æ ‡å‡†æåˆ°çš„ä¸€äº›åè¯")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("Task")])]),s._v(" "),n("p",[n("strong",[s._v("macrotask queue")]),s._v("ä¸­æœ€å…ˆå…¥é˜Ÿçš„å›è°ƒå‡½æ•°")]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("- æ³¨æ„")]),s._v(" "),n("p",[s._v("åŒæ­¥è„šæœ¬ä¹Ÿæ˜¯ä¸€ä¸ª"),n("strong",[s._v("Task")])])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("Job")])]),s._v(" "),n("p",[n("strong",[s._v("microtask queue")]),s._v("ä¸­æœ€å…ˆå…¥é˜Ÿçš„å›è°ƒå‡½æ•°")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("Jobs")])]),s._v(" "),n("p",[n("strong",[s._v("microtask queue")]),s._v("ä¸­çš„æ‰€æœ‰å›è°ƒå‡½æ•°")])])]),s._v(" "),n("h3",{attrs:{id:"event-loop-æµç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#event-loop-æµç¨‹"}},[s._v("#")]),s._v(" Event Loop æµç¨‹")]),s._v(" "),n("p",[n("img",{attrs:{src:"/weblog/imgs/browser_event_loop/event_loop.png",alt:"event loop"}})]),s._v(" "),n("p",[s._v("æ„æ€æ˜¯, æµè§ˆå™¨åœ¨æ¯ä¸€æ¬¡çš„"),n("code",[s._v("Loop")]),s._v("ä¸­")]),s._v(" "),n("ol",[n("li",[n("p",[n("strong",[s._v("Task")]),s._v("é˜¶æ®µ: å…ˆæ‰§è¡Œ"),n("strong",[s._v("Task")]),s._v(", å¦‚æœ"),n("strong",[s._v("Task")]),s._v("ä¸å­˜åœ¨çš„è¯å°±è·³è¿‡"),n("strong",[s._v("Task")]),s._v("é˜¶æ®µ")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("Jobs")]),s._v("é˜¶æ®µ: "),n("strong",[s._v("Task")]),s._v("é˜¶æ®µå®Œæˆå, è¿›å…¥"),n("strong",[s._v("Jobs")]),s._v("é˜¶æ®µ, è¿™ä¸ªæ—¶å€™ä¼šæ‰§è¡Œæ‰€æœ‰å­˜åœ¨çš„"),n("strong",[s._v("Job")]),s._v(", æ²¡æœ‰åˆ™è·³è¿‡")]),s._v(" "),n("p",[s._v("åœ¨"),n("strong",[s._v("Jobs")]),s._v("é˜¶æ®µè¿˜å¯èƒ½ä¼šäº§ç”Ÿæ–°çš„"),n("strong",[s._v("Job")])]),s._v(" "),n("p",[s._v("e.g.")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'job 0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'job 1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// job 1 å°±æ˜¯åœ¨æœ¬æ¬¡jobsé˜¶æ®µä¸­äº§ç”Ÿçš„job")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("æ–°çš„"),n("strong",[s._v("job")]),s._v("ä¹Ÿä¼šåœ¨å½“å‰"),n("strong",[s._v("Jobs")]),s._v("é˜¶æ®µæ‰§è¡Œ, "),n("strong",[s._v("Jobs")]),s._v("é˜¶æ®µå°±æ˜¯è¦æ¸…ç©ºæ‰€æœ‰çš„"),n("strong",[s._v("microtask queue")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("IndexDB")]),s._v("é˜¶æ®µ: æ¸…ç†æ‰€æœ‰çš„"),n("strong",[s._v("IndexDB")]),s._v("äº‹åŠ¡")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("UI Render")]),s._v("é˜¶æ®µ: "),n("code",[s._v("javascriptå¼•æ“")]),s._v("è¢«æŒ‚èµ·, "),n("code",[s._v("GUIå¼•æ“")]),s._v("å”¤é†’, CPUå¼€å§‹æ ¹æ®"),n("code",[s._v("RenderLayoutObject")]),s._v("åˆ¶ä½œçº¹ç†ä¼ å…¥"),n("code",[s._v("GPU")])])]),s._v(" "),n("li",[n("p",[s._v("ç­‰å¾…ä¸‹ä¸€ä¸ª"),n("strong",[s._v("Task")]),s._v("çš„å“åº”ï¼Œè¿›è¡Œä¸‹ä¸€æ¬¡çš„"),n("code",[s._v("Loop")])])])]),s._v(" "),n("hr"),s._v(" "),n("h3",{attrs:{id:"taskå’Œjobäº‹ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#taskå’Œjobäº‹ä»¶"}},[s._v("#")]),s._v(" Taskå’ŒJobäº‹ä»¶")]),s._v(" "),n("h4",{attrs:{id:"task"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#task"}},[s._v("#")]),s._v(" Task")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("setTimeout")])]),s._v(" "),n("li",[n("code",[s._v("setInterval")])]),s._v(" "),n("li",[n("code",[s._v("requestAnimationFrame")])]),s._v(" "),n("li",[n("code",[s._v("xhr")])]),s._v(" "),n("li",[n("code",[s._v("DOM Event")])]),s._v(" "),n("li",[n("code",[s._v("MessageChannel")])])]),s._v(" "),n("h4",{attrs:{id:"job"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#job"}},[s._v("#")]),s._v(" Job")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("Promise.then")])]),s._v(" "),n("li",[n("code",[s._v("MutationObserver")])])]),s._v(" "),n("p",[s._v("å€¼å¾—æ³¨æ„çš„æ˜¯æµè§ˆå™¨å¹¶ä¸æ˜¯åªå­˜åœ¨ä¸€ä¸ª"),n("strong",[s._v("macrotask queue")]),s._v("å’Œä¸€ä¸ª"),n("strong",[s._v("microtask queue")]),s._v("ç„¶åå°†å›è°ƒå‡½æ•°æ¨å…¥é˜Ÿåˆ—ä¸­")]),s._v(" "),n("p",[s._v("è€Œæ˜¯å¯¹äºä¸åŒç±»å‹çš„å›è°ƒå‡½æ•°, æ¨å…¥ç›¸åº”ç±»å‹çš„é˜Ÿåˆ—ä¸­, åœ¨"),n("code",[s._v("Event Loop")]),s._v("è°ƒåº¦çš„æ—¶å€™ä»å‡ ä¸ªé˜Ÿåˆ—ä¸­é€‰æ‹©"),n("code",[s._v("Task")]),s._v("å’Œ"),n("code",[s._v("Job")])]),s._v(" "),n("p",[s._v("å³:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("macrotask queue:\n  timer queue(setTimeout):\n  xhr queue(xhr):\n  DOM Event:\n\nmicrotask queue:\n  Promise:\n  MutationObserver:\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"event-loopçš„å¼€å§‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#event-loopçš„å¼€å§‹"}},[s._v("#")]),s._v(" Event Loopçš„å¼€å§‹")]),s._v(" "),n("p",[s._v("å½“è„šæœ¬å¼€å§‹æ‰§è¡Œçš„æ—¶å€™"),n("code",[s._v("Event Loop")]),s._v("å°±å·²ç»å¼€å§‹å·¥ä½œäº†")]),s._v(" "),n("p",[s._v("ä¸€ä¸ªé”™è¯¯çš„ç†è§£æ˜¯: "),n("strong",[s._v("å½“åŒæœ¬è„šæœ¬æ‰§è¡Œå®Œæ¯•å, æ‰å¼€å§‹"),n("code",[s._v("Event Loop")]),s._v("çš„è°ƒåº¦")]),s._v(" âŒ  âŒ")]),s._v(" "),n("p",[s._v("ğŸŒ°")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'timeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ts "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" te "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("te "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" ts "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  te "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nPromise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'job 0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'job 1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŒ‰ç…§é”™è¯¯çš„ç†è§£, å½“åŒæ­¥è„šæœ¬æ‰§è¡Œå®Œæ¯•åï¼Œè¿›å…¥Event Loopè°ƒåº¦")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¤æ—¶åº”è¯¥ä¼˜å…ˆæ‰§è¡ŒTask, å³: timeout")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰€ä»¥æœŸæœ›çš„è¾“å‡ºåº”è¯¥æ˜¯")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// start")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// timeout")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// job 0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// job 1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½†æ˜¯å®é™…å´å¹¶ä¸æ˜¯å¦‚æ­¤")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// start")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// job 0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// job 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// timeout")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("p",[n("strong",[s._v("è¿™ä¹Ÿå°±æ˜¯å‰é¢æåˆ°çš„, åŒæ­¥è„šæœ¬æ˜¯ä¸€ä¸ªTask")])]),s._v(" "),n("h3",{attrs:{id:"å®è·µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®è·µ"}},[s._v("#")]),s._v(" å®è·µ")]),s._v(" "),n("p",[s._v("é‡‡ç”¨æœ€å‰é¢æåˆ°çš„ğŸŒ°")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script start'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async1 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async2 end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'setTimeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Promise'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŒæ­¥è„šæœ¬çš„æ‰§è¡Œå°±å·²ç»å¼€å§‹Event Loop")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ---------------- Task é˜¶æ®µ ------------------------")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. console.log(script start)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. async1();")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    2.1. await async2();")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      2.1.1. async2(); console.log(async2 end);")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      2.1.2. async2()è¿”å›äº†ä¸€ä¸ªresolveçŠ¶æ€çš„promise")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    2.2. Promise queue è¢«æ¨å…¥äº†ä¸€ä¸ªjob(job 0 -> console.log(async1 end))")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. setTimeout(); è°ƒèµ·æµè§ˆå™¨timerçº¿ç¨‹, åœ¨0såå°†console.log(setTimeout) æ¨å…¥ Timeout queue (è¿™é‡Œä¸è€ƒè™‘çº³å…¥æ ‡å‡†çš„4ms, å› ä¸ºç»è¿‡æˆ‘æµ‹è¯•å‘ç°setTimeout(callback, 0)å¹¶ä¸æ€»æ˜¯4ms, è¿˜å¯èƒ½æ˜¯1m..., åŒæ—¶0sä¹Ÿæ›´èƒ½è¯´æ˜é—®é¢˜)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. new Promise(); -> console.log(Promise);")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    4.1 å°†console.log('promise1')ä½œä¸ºjobæ¨å…¥Promise queue(job 1 -> console.log('promise1'))")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. console.log('script end')")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‡½æ•°çš„ä¼ªè°ƒç”¨æ ˆä¸º")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// callback stack(å®é™…çš„è°ƒç”¨æ ˆä¸æ˜¯è¿™æ ·çš„, è¿™é‡Œåªæ˜¯ä¸ºäº†æ›´å¥½çš„è¯´æ˜é—®é¢˜ï¼Œéœ€è¦æ³¨æ„, è¿™é‡Œæ›´åƒæ˜¯callback queue):")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    console.log(script start); // 1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    console.log(async2 end);   // 2.1.1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    console.log(Promise);      // 4")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    console.log(script end);   // 5")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// macrotask queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      timeout queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//          console.log(setTimeout); // 3")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// microtask queue")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      promise queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//          job0 -> console.log(async1 end)  // 2.2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//          job1 -> console.log(promise1)    // 4.1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰§è¡Œcallback stack")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script start")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// async2 end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Promise")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script end")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ------------Task é˜¶æ®µç»“æŸ, è¿›å…¥Jobsé˜¶æ®µ-----------------")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†microtask queue æŒ‰ç…§ä¾æ¬¡å‡ºé˜Ÿï¼Œå‹å…¥callback stack")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// callback stack")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    job0 -> console.log(async1 end)  // 2.2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    job1 -> console.log(promise1)    // 4.1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// macrotask queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      timeout queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//          console.log(setTimeout); // 3")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// microtask queue")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      promise queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰§è¡Œcallback stack")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// async1 end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// promise1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ åœ¨æ‰§è¡Œjob1ç»“æŸå, promise queue åˆå…¥é˜Ÿäº†æ–°çš„job(job 2 -> console.log(promise2))")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// microtask queue")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      promise queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//          job 2 -> console.log(promise2)")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ¨å…¥callback stack æ‰§è¡Œåå¾—åˆ°")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// microtask queue")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      promise queue:")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Jobsé˜¶æ®µç»“æŸ")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -------------- IndexDB äº‹åŠ¡ ---------------------")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -------------- UI Render é˜¶æ®µ -------------------")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¤æ—¶macrotask Queueè¿˜å­˜åœ¨ä¸€ä¸ªTask")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// macrotask queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//      timeout queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//          console.log(setTimeout); // 3")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿›å…¥ä¸‹ä¸€æ¬¡ Loop çš„ Taské˜¶æ®µ")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰€ä»¥èƒ½å¾—åˆ°")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script start")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// async2 end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Promise")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// script end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// async1 end")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// promise1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// promise2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// setTimeout")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™æ ·çš„è¾“å‡ºç»“æœ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br")])]),n("h2",{attrs:{id:"ui-render"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ui-render"}},[s._v("#")]),s._v(" UI Render")]),s._v(" "),n("p",[n("code",[s._v("UI Render")]),s._v("é˜¶æ®µ, "),n("strong",[s._v("GUIå¼•æ“")]),s._v("å¼€å§‹å·¥ä½œ, "),n("strong",[s._v("javascriptå¼•æ“")]),s._v("è¢«æŒ‚èµ·, "),n("strong",[s._v("CPU")]),s._v("å¼€å§‹ç»˜åˆ¶çº¹ç†è¾“å…¥"),n("strong",[s._v("GPU")])]),s._v(" "),n("p",[n("code",[s._v("UI Render")]),s._v("æ˜¯æµè§ˆå™¨å®ç°"),n("code",[s._v("batch render")]),s._v("çš„æ ¸å¿ƒé€»è¾‘")]),s._v(" "),n("p",[s._v("çœ‹ä¸€ä¸‹ğŸŒ°")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'200px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'300px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™æ ·çš„ä»£ç æµè§ˆå™¨åªä¼šåˆ¶ä½œä¸€ä¸ªçº¹ç†, è€Œä¸æ˜¯åˆ¶ä½œ2ä¸ªçº¹ç†")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯ä»¥è¿™æ ·ç†è§£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// GUIå¼•æ“ç»´æŠ¤äº†ä¸€ä¸ªé˜Ÿåˆ—")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨æ‰§è¡Œdiv.style.top = '200px'; æ—¶ ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// javascript å¼•æ“ é€šçŸ¥ GUIå¼•æ“ å…¥é˜Ÿä¸€ä¸ªdiv.style.top = 200çš„å›è°ƒå‡½æ•°")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŒç†, è¿™ä¸ªé˜Ÿåˆ—ä¸­ç»´æŠ¤äº†2ä¸ªå›è°ƒ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// gui queue:")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    div.style.top = 200")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    div.style.top = 300")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨UI Renderé˜¶æ®µæ¸…ç©ºé˜Ÿåˆ—ä»»åŠ¡, ç»˜åˆ¶çº¹ç†")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h3",{attrs:{id:"transitionåŠ¨ç”»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transitionåŠ¨ç”»"}},[s._v("#")]),s._v(" TransitionåŠ¨ç”»")]),s._v(" "),n("p",[n("strong",[s._v("UI Render")]),s._v(" ä¸€ä¸ªå…·ä½“çš„åº”ç”¨å°±æ˜¯"),n("code",[s._v("transition")]),s._v("åŠ¨ç”»")]),s._v(" "),n("p",[s._v("ğŸŒ°")]),s._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[s._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[s._v("#div")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("position")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" absolute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v("background-color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" red"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- æƒ³è®©è¿™ä¸ªdivåœ¨æ–‡æ¡£åŠ è½½å®Œæˆåå³200pxçš„ä½ç½®æ»šåŠ¨åˆ°300pxçš„ä½ç½® --\x3e")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›javascriptä»£ç  --\x3e")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" div "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// example 1")]),s._v("\ndiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'200px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("transition "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'top linear 1s'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'300px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¦‚æœä½ æœ‰ç»éªŒçš„è¯ï¼Œä½ çŸ¥é“å®ƒä¸€å®šæ˜¯ä¸è¡Œçš„")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½ å¯èƒ½ä¼šè¿™æ ·")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// example 2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'300px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸çŸ¥é“ä½ æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆè¦ä¹ˆåš")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("å…¶å®è¿™ä¹Ÿå’Œ"),n("code",[s._v("Event Loop")]),s._v("æœ‰å…³")]),s._v(" "),n("p",[s._v("æˆ‘ä»¬çŸ¥é“è¿‡æ¸¡åŠ¨ç”»éœ€è¦"),n("strong",[s._v("start")]),s._v("å’Œ"),n("strong",[s._v("end")]),s._v("2ç§çŠ¶æ€, è¿™å°±æ„å‘³ç€"),n("strong",[s._v("GUI")]),s._v("éœ€è¦ç›¸åº”çš„åˆ¶ä½œ2ä¸ªçº¹ç†")]),s._v(" "),n("p",[s._v("è€Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­")]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("example 1")])]),s._v(" "),n("p",[s._v("ç”±äºå‘ç”Ÿäº†ä¸€æ¬¡"),n("code",[s._v("Event Loop")]),s._v(", æ‰€ä»¥æœ‰1ä¸ª"),n("code",[s._v("UI Render")]),s._v(", ç”Ÿæˆäº†1ä¸ªçº¹ç†, æ‰€ä»¥æ²¡æœ‰äº§ç”Ÿè¿‡æ¸¡")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("example 2")])]),s._v(" "),n("p",[s._v("å‘ç”Ÿäº†2æ¬¡"),n("code",[s._v("Event Loop")]),s._v(", æœ‰2ä¸ª"),n("code",[s._v("UI Render")]),s._v(", å¹¶ä¸”2æ¬¡çš„"),n("code",[s._v("UI Render")]),s._v("é˜Ÿåˆ—éƒ½ä¸æ˜¯ç©ºçš„, æ‰€ä»¥äº§ç”Ÿäº†2ä¸ªçº¹ç†, å¯¹åº”äº†2ä¸ª"),n("code",[s._v("top")]),s._v("çŠ¶æ€, æ‰€ä»¥è¿‡æ¸¡åŠ¨ç”»ç”Ÿæ•ˆ")])])]),s._v(" "),n("p",[s._v("ä½ ä¹Ÿå¯ä»¥è¿™æ ·")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" port1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MessageChannel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nport1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onmessage")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'300px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nport2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("postMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("ä½†æ˜¯è¿™æ ·åˆ™ä¸å¯ä»¥")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'300px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å› ä¸ºè¿™æ˜¯ä¸€ä¸ªjob è€Œä¸æ˜¯ä¸€ä¸ªæ–°çš„task")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"guiå¼•æ“çš„å”¤é†’"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#guiå¼•æ“çš„å”¤é†’"}},[s._v("#")]),s._v(" GUIå¼•æ“çš„å”¤é†’")]),s._v(" "),n("p",[s._v("GUIå¼•æ“çš„å”¤é†’æœ‰2ç§æ–¹å¼")]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("UI Render")])]),s._v(" "),n("p",[s._v("å‰é¢æåˆ°è¿‡, "),n("code",[s._v("UI Render")]),s._v("é˜¶æ®µä¼šæŒ‚èµ·"),n("code",[s._v("javascript å¼•æ“")]),s._v(", å”¤é†’"),n("code",[s._v("GUIå¼•æ“")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("å›æµ")])]),s._v(" "),n("p",[s._v("å‰é¢æåˆ°è¿‡, æµè§ˆå™¨å…·æœ‰"),n("code",[s._v("batch render")]),s._v("åŠŸèƒ½, ç»Ÿä¸€åœ¨"),n("code",[s._v("UI Render")]),s._v("é˜¶æ®µåˆ¶ä½œçº¹ç†")]),s._v(" "),n("p",[s._v("ä½†æ˜¯åœ¨æŸäº›éœ€è¦è¯»å–å…ƒç´ ä½ç½®çš„å›æµæ“ä½œä¸Š, å¯ä»¥æ‰“ç ´ä¸Šè¿°è§„åˆ™, åœ¨é"),n("code",[s._v("UI Render")]),s._v("çš„é˜¶æ®µå”¤é†’"),n("code",[s._v("GUI å¼•æ“")]),s._v("åˆ¶ä½œçº¹ç†")]),s._v(" "),n("p",[s._v("åƒå‰é¢æåˆ°çš„"),n("code",[s._v("transition")]),s._v("çš„ ğŸŒ° , ä¸ºäº†å®ç°è¿‡æ¸¡æ•ˆæœæˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'200px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("transition "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'top linear 1s'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getBoundingClientRect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å”¤é†’GUIå¼•æ“, æ ¹æ®ç»´æŠ¤çš„é˜Ÿåˆ—å†…å®¹ç»˜åˆ¶çº¹ç†(top = 200)")]),s._v("\n\ndiv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'300px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨æœ¬æ¬¡ Event Loop çš„ UI Renderé˜¶æ®µ ç»˜åˆ¶çº¹ç†(top = 300)")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™ä¹Ÿæ˜¯å¯è¡Œçš„")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])])])]),s._v(" "),n("h2",{attrs:{id:"settimeout-setinterval-requsetanimationframeå·®å¼‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#settimeout-setinterval-requsetanimationframeå·®å¼‚"}},[s._v("#")]),s._v(" setTimeout, setInterval, requsetAnimationFrameå·®å¼‚")]),s._v(" "),n("h3",{attrs:{id:"æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“å…ƒç´ çš„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“å…ƒç´ çš„"}},[s._v("#")]),s._v(" æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“å…ƒç´ çš„")]),s._v(" "),n("p",[n("a",{attrs:{href:""}},[s._v("TODO è¿™é‡Œæ˜¯ä¸€ä¸ªå•ç‹¬çš„å†…å®¹")])]),s._v(" "),n("p",[s._v("ç®€å•æ¥è¯´å°±æ˜¯")]),s._v(" "),n("ol",[n("li",[n("code",[s._v("GUI å¼•æ“")]),s._v("ä¸å®šæ—¶æ ¹æ®"),n("code",[s._v("javascript å¼•æ“")]),s._v("ç»´æŠ¤çš„"),n("code",[s._v("RenderLayoutObject")]),s._v("ç»˜åˆ¶çº¹ç†")])]),s._v(" "),n("ul",[n("li",[s._v("è¿™é‡Œå°±æ¶‰åŠåˆ°"),n("strong",[s._v("GUI å¼•æ“çš„å”¤é†’")]),s._v("( "),n("code",[s._v("UI Render")]),s._v(", "),n("code",[s._v("å›æµ")]),s._v(")")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[n("p",[s._v("å°†ç»˜åˆ¶å‡ºçš„çº¹ç†ä¼ å…¥"),n("strong",[s._v("GPU")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("GPU")]),s._v("ä¸å®šæ—¶å°†çº¹ç†"),n("strong",[s._v("paint")]),s._v("åˆ°é¡µé¢ä¸Š(è¿™ä¸ªæ—¶é—´å°±æ˜¯ 1 / æµè§ˆå™¨åˆ·æ–°é¢‘ç‡)")])])]),s._v(" "),n("p",[s._v("å¯¹äºæŸäº›å¼€å§‹äº†"),n("strong",[s._v("GPU åŠ é€Ÿ")]),s._v("çš„"),n("strong",[s._v("layer")]),s._v(", åˆ™è·³è¿‡äº†"),n("strong",[s._v("CPUç»˜åˆ¶çº¹ç†çš„è¿‡ç¨‹")])]),s._v(" "),n("h3",{attrs:{id:"è·³å¸§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·³å¸§"}},[s._v("#")]),s._v(" è·³å¸§")]),s._v(" "),n("p",[s._v("è·³å¸§æ˜¯ä¸€ç§é€»è¾‘ä¸Šçš„æ­£ç¡®, ä½†æ˜¯åœ¨UIè¡¨ç°ä¸Šæ˜¯é”™è¯¯çš„")]),s._v(" "),n("p",[s._v("ğŸŒ°")]),s._v(" "),n("p",[s._v("ä¸€ä¸ªäººä»¥"),n("strong",[s._v("1m/s")]),s._v(" çš„ é€Ÿåº¦è·‘äº†10s")]),s._v(" "),n("p",[s._v("ä½ ä»¥"),n("strong",[s._v("1hz")]),s._v("çš„é¢‘ç‡çœ¨çœ¼")]),s._v(" "),n("p",[s._v("æ‰€ä»¥ä½ èƒ½çœ‹åˆ°çš„è¿™ä¸ªäººçš„ä½ç§»è¿‡ç¨‹æ˜¯")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1m -> 2m -> 3m -> 4m -> ... 10m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("ä½†æ˜¯å¦‚æœæŸæ¬¡ä½ çªç„¶è¿·çœ¼äº†, ä½ å¯èƒ½ç”¨äº†5sæ¥æ¸…ç†ğŸ‘€ , ç­‰ä½ å†æ¬¡çœ‹è¿™ä¸ªäººçš„æ—¶å€™ä»–å¯èƒ½å·²ç»è·‘å®Œäº†")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1m -> 2m -> 3m -> 4m -> 5m -> 10m\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("5m -> 10m")]),s._v("çš„è¿‡ç¨‹å°±æ˜¯è·³å¸§")]),s._v(" "),n("h3",{attrs:{id:"å¡é¡¿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¡é¡¿"}},[s._v("#")]),s._v(" å¡é¡¿")]),s._v(" "),n("p",[s._v("å¡é¡¿å’Œè·³å¸§ç›¸å, æ˜¯é€»è¾‘ä¸Šçš„é”™è¯¯, UIæ­£ç¡®")]),s._v(" "),n("p",[s._v("è¿˜æ˜¯è¿™ä¸ªäººåœ¨ğŸƒâ€")]),s._v(" "),n("p",[s._v("ä¸è¿‡å…¶é€Ÿåº¦æ˜¯ 0.00001m/s")]),s._v(" "),n("p",[s._v("è¿™çœ‹èµ·æ¥å¥½åƒæ˜¯ä¸ªæ²¡å¼€å‘å®Œçš„æœºå™¨äººğŸ¤–ï¸")]),s._v(" "),n("p",[s._v("è¿™è¿˜ç®—æ˜¯è·‘æ­¥ä¹ˆ?")]),s._v(" "),n("p",[s._v("å¡é¡¿ä¸€èˆ¬éƒ½æ˜¯ç”±äº æ¸²æŸ“åŠ¨ç”»çš„æ—¶é—´è®¾ç½®ä¸æ­£ç¡®")]),s._v(" "),n("h3",{attrs:{id:"setinterval"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setinterval"}},[s._v("#")]),s._v(" setInterval")]),s._v(" "),n("p",[s._v("ç”¨"),n("code",[s._v("setInterval")]),s._v("å®ç°åŠ¨ç”»æœ€å¤§çš„å¼Šç—…åœ¨äºå…¶å¾ˆå¯èƒ½ä¼šå‡ºç°è·³å¸§çš„æƒ…å†µ")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" offset "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  offset "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" offset "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("è¿™æ®µä»£ç æœŸæœ›CPU æ¯1000 / 60 ms ç»˜åˆ¶ä¸€ä¸ªçº¹ç†, ä¼ ç»™GPU")]),s._v(" "),n("p",[s._v("ä½†æ˜¯å®é™…å¹¶ä¸æ€»æ˜¯å¦‚æ­¤, æ ¹æ®å‰é¢"),n("code",[s._v("Event Loop")]),s._v("çš„å†…å®¹, å‡å¦‚å‰ä¸€ä¸ª"),n("strong",[s._v("Task")]),s._v("å‘ç”Ÿäº†5 * 1000 / 60msçš„é˜»å¡")]),s._v(" "),n("p",[s._v("é‚£ä¹ˆå½“å‰"),n("strong",[s._v("macrotask queue")]),s._v("åº”è¯¥æ˜¯è¿™æ ·çš„")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("macrotask queue:\n    interval queue: \n        task 0 -> offset += 10;\n        task 1 -> offset += 10;\n        task 2 -> offset += 10;\n        task 3 -> offset += 10;\n        task 4 -> offset += 10;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("è¿™ä¸ªæ—¶å€™å¯¹äº"),n("code",[s._v("task 0, task 1, task 2, task 3, task 4")]),s._v("è¿™äº›"),n("strong",[s._v("Task")]),s._v("è€Œè¨€å°±å¤±å»äº†"),n("code",[s._v("1000 / 60")]),s._v("çš„æ—¶é—´é—´éš”")]),s._v(" "),n("p",[n("strong",[s._v("GPU")]),s._v("ç›´æ¥åœ¨ä¸‹æ¬¡"),n("strong",[s._v("paint")]),s._v("çš„æ—¶å€™å°†æœ€ç»ˆç»“æœ"),n("code",[s._v("offset = 60")]),s._v(" ç»˜åˆ¶ åˆ° é¡µé¢ä¸Š")]),s._v(" "),n("p",[s._v("å³:")]),s._v(" "),n("p",[n("code",[s._v("setInterval")]),s._v("ä¼šå‘ç”Ÿè·³å¸§")]),s._v(" "),n("h3",{attrs:{id:"settimeout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#settimeout"}},[s._v("#")]),s._v(" setTimeout")]),s._v(" "),n("p",[s._v("ä½¿ç”¨"),n("code",[s._v("setTimeout")]),s._v("å°±ä¸ä¼šå‡ºç°è·³å¸§çš„ç°è±¡, å› ä¸º"),n("code",[s._v("setTimeout")]),s._v("å®ç°çš„åŠ¨ç”»æ˜¯åœ¨æœ€åäº§ç”Ÿäº†ä¸‹ä¸€ä¸ª"),n("strong",[s._v("Task")]),s._v(", å³ä½¿å‰ä¸€ä¸ª"),n("strong",[s._v("Loop")]),s._v("å‘ç”Ÿé˜»å¡, "),n("strong",[s._v("macrotask queue")]),s._v("ä¹Ÿä¸ä¼šåƒ"),n("code",[s._v("setInterval")]),s._v("ä¸€æ ·å †ç§¯äº†å¾ˆå¤šçš„"),n("strong",[s._v("Animation Task")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" offest "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("animation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  offset "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" offset "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'px'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("animation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("animation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("hr"),s._v(" "),n("p",[s._v("çœ‹æ¥å¤šä¹ˆçš„ç¾å¥½ !!!")]),s._v(" "),n("p",[s._v("ä½†æ˜¯"),n("code",[s._v("setTimout")]),s._v("è®¾ç½®çš„æ—¶é—´è¦è¶³å¤Ÿåˆé€‚")]),s._v(" "),n("p",[s._v("å¤ªå¤§æˆ–è€…å¤ªå°éƒ½ä¼šæœ‰å…¶ä»–é—®é¢˜")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("æ—¶é—´é—´éš”å¾ˆå°, å¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜")]),s._v(" "),n("p",[s._v("æµè§ˆå™¨"),n("strong",[s._v("GPU")]),s._v("ç»˜åˆ¶1æ¬¡, "),n("strong",[s._v("CPU")]),s._v("ç»˜åˆ¶äº†å¤šä¸ªçº¹ç†, æˆ‘ä»¬çŸ¥é“"),n("code",[s._v("GUI")]),s._v("å’Œ"),n("code",[s._v("JS")]),s._v("æ˜¯äº’æ–¥çš„")]),s._v(" "),n("p",[n("strong",[s._v("GPU")]),s._v("åªä½¿ç”¨åˆ°äº†æœ€åä¸€ä¸ªçº¹ç†, å…¶ä»–éƒ½è¢«æµªè´¹, "),n("code",[s._v("javascript å¼•æ“")]),s._v("è¢«æ— æ„ä¹‰çš„æŒ‚èµ·")])]),s._v(" "),n("li",[n("p",[s._v("æ—¶é—´é—´éš”å¾ˆå¤§, å¯èƒ½ä¼šå¡é¡¿")])])]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("æ‰€ä»¥è¿™ä¸ªæ—¶é—´é—´éš”å°½é‡å’Œ"),n("strong",[s._v("GPU")]),s._v("æ¯æ¬¡ç»˜åˆ¶çš„æ—¶é—´é—´éš”ä¸€è‡´(æµè§ˆå™¨åˆ·æ–°é¢‘ç‡)")]),s._v(" "),n("p",[s._v("ä¸€èˆ¬æµè§ˆå™¨åˆ·æ–°æ˜¯"),n("code",[s._v("60HZ")]),s._v("(å¹³å‡)")]),s._v(" "),n("p",[s._v("è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ€»è®¾ç½®"),n("code",[s._v("1000 / 60")]),s._v("çš„åŸå› ")]),s._v(" "),n("p",[s._v("ä½†æ˜¯æ¯•ç«Ÿæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å€¼, æ‰€ä»¥åé¢"),n("code",[s._v("H5")]),s._v("æå‡ºäº†"),n("code",[s._v("requestAnimationFrame")]),s._v("è¿™ä¸ªAPI")]),s._v(" "),n("h3",{attrs:{id:"requestanimationframe"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe"}},[s._v("#")]),s._v(" requestAnimationFrame")]),s._v(" "),n("p",[n("code",[s._v("requestAnimationFrame")]),s._v("æœŸæœ›å›è°ƒå‡½æ•°åœ¨æµè§ˆå™¨åˆ·æ–°"),n("code",[s._v("frame")]),s._v("å‰æ‰§è¡Œ")]),s._v(" "),n("p",[s._v("ç”¨å®ƒå®ç°"),n("code",[s._v("js")]),s._v("åŠ¨ç”»å°±æ˜¯ä¸€ä¸ªåŠ¨æ€è®¾ç½®æ—¶é—´çš„"),n("code",[s._v("setTimeout")]),s._v(", å¹¶ä¸”è¿™ä¸ªæ—¶é—´æ€»æ˜¯æœ€åˆé€‚çš„")]),s._v(" "),n("p",[s._v("è¿™å°±ä¿è¯äº†, åœ¨"),n("strong",[s._v("GPU")]),s._v("ç»˜åˆ¶å‰, "),n("strong",[s._v("CPU")]),s._v("æ€»æ˜¯è¾“å…¥ç»™"),n("strong",[s._v("GPU")]),s._v("ä¸€ä¸ªçº¹ç†")]),s._v(" "),n("p",[s._v("ä¸–ç•Œç¾å¥½äº† ï¼ï¼")]),s._v(" "),n("h2",{attrs:{id:"node-event-loop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-event-loop"}},[s._v("#")]),s._v(" Node Event Loop")]),s._v(" "),n("p",[s._v("node event loop æ˜¯åŸºäº "),n("code",[s._v("libuv")]),s._v("å®ç°çš„, æŒºä¹±çš„, æš‚æ—¶æ²¡æœ‰æ•´ç†")]),s._v(" "),n("p",[s._v("TODO è¿™é‡Œåº”è¯¥æ˜¯ä¸€ä¸ªé“¾æ¥")])])}),[],!1,null,null,null);t.default=e.exports}}]);