(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{388:function(s,a,t){"use strict";t.r(a);var e=t(42),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"branch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#branch"}},[s._v("#")]),s._v(" branch")]),s._v(" "),t("p",[t("code",[s._v("branch")]),s._v("是GIT多人合作并行开发的基础, 它就像是车间的一条条工作流, 每个人可以完成相应的工作, 最后在整合")]),s._v(" "),t("p",[s._v("但是对于GIT逻辑而言, "),t("code",[s._v("branch")]),s._v("只是对"),t("code",[s._v("commit-SHA-1")]),s._v("的一种特殊索引, "),t("strong",[s._v("特殊在这个索引会随着每次提交自动更新")]),s._v(", 就形成了我们理解的"),t("code",[s._v("workflow")])]),s._v(" "),t("p",[s._v("举个🌰 :")]),s._v(" "),t("p",[s._v("(我们知道"),t("code",[s._v("branch")]),s._v("其实对应了"),t("code",[s._v("refs/heads/")]),s._v("下的文件)")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# master")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# current commit-sha-1=1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'initial'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("code",[s._v("commit")]),s._v("时GIT通过"),t("code",[s._v("HEAD")]),s._v("索引到当前的分支"),t("code",[s._v("refs/heads/master")]),s._v(", "),t("code",[s._v("refs/heads/master")]),s._v("索引了当前的提交记录"),t("code",[s._v("1")])]),s._v(" "),t("p",[s._v("GIT将当前的提交记录"),t("code",[s._v("1")]),s._v(", 作为本次提交的"),t("code",[s._v("parent")]),s._v("属性, 同时根据文件内容生成其他"),t("code",[s._v("tree-object")]),s._v("... 这样一个完整的提交就形成了"),t("code",[s._v("2")])]),s._v(" "),t("p",[s._v("同时GIT会尝试更新"),t("code",[s._v("refs/heads/master")]),s._v("内的内容为这次的提交"),t("code",[s._v("2")]),s._v(", 这样"),t("code",[s._v("refs/heads/master")]),s._v("内记录了最新提交, 然后递归"),t("code",[s._v("parent")]),s._v("就能够得到完整的"),t("code",[s._v("workflow")])]),s._v(" "),t("hr"),s._v(" "),t("p",[t("strong",[s._v("有一种情况下, GIT会通过HEAD直接索引到当前的提交记录")]),s._v(", 这就是分离头指针状态"),t("code",[s._v("detach HEAD")])]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("detach HEAD")]),s._v("下后面的提交无法被GIT"),t("code",[s._v("索引")]),s._v(", 相当于丢失, 导致"),t("code",[s._v("detach HEAD")]),s._v("的根本原因在于")]),s._v(" "),t("p",[t("code",[s._v("HEAD")]),s._v(" -> "),t("code",[s._v("commit-SHA-1")]),s._v(", 而非")]),s._v(" "),t("p",[t("code",[s._v("HEAD")]),s._v(" -> "),t("code",[s._v("refs/heads/branch_name")]),s._v(" -> "),t("code",[s._v("commit-SHA-1")])]),s._v(" "),t("p",[s._v("这样GIT不会知道要将本次的提交记录在哪里")]),s._v(" "),t("p",[s._v("举个🌰 :")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# master 1 -> 2 -> 3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此时进入了detach HEAD, HEAD内记录了1, 而不是refs/heads/master")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这时由于HEAD内不是一个分支索引我们的提交历史变成了这样")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1 -> 2 -> 3(master)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   -> 4(没有索引)")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("- 注意")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("detach HEAD")]),s._v("状态下的提交只是丢失了索引, 而不是丢失了文件快照")]),s._v(" "),t("p",[s._v("你可以通过一些你能想到的其他方法找回")]),s._v(" "),t("p",[s._v("比如, 如果你没有切换分支的话, 可以通过"),t("code",[s._v("git log")]),s._v("找到最新的"),t("code",[s._v("SHA-1")]),s._v(", 然后基于其创建一个分支")]),s._v(" "),t("p",[s._v("如果你切换了分支的话, 你可能需要遍历"),t("code",[s._v("refs/objects")]),s._v("下的所有"),t("code",[s._v("SHA-1")]),s._v(", 然后通过"),t("code",[s._v("git cat-file")]),s._v("命令找到提交对象, 在通过其他属性来找到刚刚的提交对象了")]),s._v(" "),t("p",[s._v("当然, "),t("code",[s._v("detach HEAD")]),s._v("是一种相当危险的操作, GIT在进入"),t("code",[s._v("detach HEAD")]),s._v("和离开"),t("code",[s._v("detach HEAD")]),s._v("的时候会有相关提示, 注意GIT提示能帮助我们减少风险操作")])]),s._v(" "),t("h2",{attrs:{id:"如何创建一个branch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何创建一个branch"}},[s._v("#")]),s._v(" 如何创建一个branch")]),s._v(" "),t("h3",{attrs:{id:"手动创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手动创建"}},[s._v("#")]),s._v(" 手动创建")]),s._v(" "),t("p",[s._v("我们知道"),t("code",[s._v("branch")]),s._v("其实只是"),t("code",[s._v("refs/heads/")]),s._v("下的一个记录"),t("code",[s._v("SHA-1")]),s._v("的文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log -1 --pretty"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("format:"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%H"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" .git/refs/heads/xxx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建了一个xxx分支")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" xxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"git-command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#git-command"}},[s._v("#")]),s._v(" git command")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("git branch [--track | --no-track(default)] <branch_name> <start-point=HEAD>")])])]),s._v(" "),t("p",[s._v("满足上面格式的"),t("code",[s._v("git branch")]),s._v("命令则会创建一个"),t("code",[s._v("branch")])]),s._v(" "),t("p",[s._v("其中"),t("code",[s._v("<start-point=HEAD>")]),s._v("是一个"),t("code",[s._v("commit-SHA-1")]),s._v("或者是可以索引到"),t("code",[s._v("commit-SHA-1")]),s._v("关键字, 表示以"),t("code",[s._v("start-point")]),s._v("为参照创建一个分支, 默认是HEAD")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch dev1 master\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以master分支为参照创建dev1分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp -f ./git/refs/heads/master ./git/refs/heads/dev1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("hr"),s._v(" "),t("p",[s._v("其中"),t("code",[s._v("--track")]),s._v("表示以"),t("code",[s._v("<start-point>")]),s._v("为上游分支创建分支, 此时"),t("code",[s._v("start-point")]),s._v("必须是一个远端分支在本地的镜像(可以是别名)")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch --track dev1 origin/dev1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("refs/remotes/origin/dev1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -vv "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" dev1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dev1   807c693 [origin/dev1] add")]),s._v("\n\n并且会增加如下配置.git/config\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  remote "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" origin\n  merge "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" refs/heads/dev1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("git checkout [--track | --no-track(default)] -b <branch_name> <start-point=HEAD>")])])]),s._v(" "),t("p",[s._v("这个命令是"),t("code",[s._v("git branch [--track | --no-track(default)] <branch_name> <start-point=HEAD>")]),s._v("和"),t("code",[s._v("git checkout <branch_name>")]),s._v("的复写")]),s._v(" "),t("p",[s._v("创建分支然后切换分支")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("git branch [-c | -C] <old_branch> <new_branch>")])])]),s._v(" "),t("p",[s._v("严格意义来说它不是一个创建分支的命令, 他是"),t("code",[s._v("copy")]),s._v("了一个分支")]),s._v(" "),t("p",[t("code",[s._v("-C")]),s._v("表示强制"),t("code",[s._v("copy")]),s._v(" 意味着"),t("code",[s._v("new_branch")]),s._v("已经存在")]),s._v(" "),t("h3",{attrs:{id:"一些补充"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一些补充"}},[s._v("#")]),s._v(" 一些补充")]),s._v(" "),t("p",[t("RouterLink",{attrs:{to:"/git/checkout.html#创建并切换分支"}},[s._v("checkout 创建且切换分支")])],1),s._v(" "),t("h2",{attrs:{id:"branch的upstream-downstream关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#branch的upstream-downstream关系"}},[s._v("#")]),s._v(" branch的upstream/downstream关系")]),s._v(" "),t("p",[s._v("分支的上下游关系在使用"),t("code",[s._v("git push")]),s._v("命令的时候起作用, "),t("code",[s._v("git push")]),s._v("的默认行为是"),t("code",[s._v("simple")]),s._v("其要求当前分支要存在上游分支, 且上游分支和当前分支的名字应该一致")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("git branch [--set-upstream-to=<origin_branch> | -u <origin_branch>] <branch_name=HEAD>")])])]),s._v(" "),t("p",[s._v("给"),t("code",[s._v("branch_name")]),s._v("建立上游分支"),t("code",[s._v("<origin_branch>")]),s._v(", 如果不指定"),t("code",[s._v("branch_name")]),s._v("则是当前分支")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("- 注意")]),s._v(" "),t("p",[t("code",[s._v("branch_name")]),s._v(" 需 已经被创建")]),s._v(" "),t("p",[s._v("它和"),t("code",[s._v("--track")]),s._v("的区别在于")]),s._v(" "),t("p",[t("code",[s._v("--track")]),s._v("是创建一个有上游分支的本地分支")]),s._v(" "),t("p",[t("code",[s._v("-u")]),s._v("是给当前存在的本地分支建立上游关系")])]),s._v(" "),t("p",[s._v("我们也可以在推送的时候建立上游关系")]),s._v(" "),t("p",[t("code",[s._v("git push (-u | --set-upstream) origin branch_name")])]),s._v(" "),t("p",[s._v("将本地branch_name和远程branch_name分支建立上下游关系")]),s._v(" "),t("hr"),s._v(" "),t("ul",[t("li",[t("code",[s._v("git branch [--unset-upstream] <branch_name=HEAD>")])])]),s._v(" "),t("p",[s._v("给"),t("code",[s._v("branch_name")]),s._v("取消上游分支, 不指定则是当前分支")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch --set-upstream-to"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("origin/master dev1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给dev1建立上游分支master")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch --unset-upstream dev1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消dev1的上游分支")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"给分支重命名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#给分支重命名"}},[s._v("#")]),s._v(" 给分支重命名")]),s._v(" "),t("p",[t("code",[s._v("git branch [-m | -M] <old_branch> <new_branch>")])]),s._v(" "),t("p",[t("code",[s._v("-M")]),s._v("表示强制重命名, 即存在和"),t("code",[s._v("new_branch")]),s._v("同名的分支, 覆盖则会发生提交记录的索引丢失")]),s._v(" "),t("h2",{attrs:{id:"查看分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看分支"}},[s._v("#")]),s._v(" 查看分支")]),s._v(" "),t("h3",{attrs:{id:"查看远程分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看远程分支"}},[s._v("#")]),s._v(" 查看远程分支")]),s._v(" "),t("p",[t("code",[s._v("git branch -r")]),s._v("可以查看本地的所有远程分支的镜像, 同时其指明了远程HEAD所记录的分支")]),s._v(" "),t("h3",{attrs:{id:"查看本地分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看本地分支"}},[s._v("#")]),s._v(" 查看本地分支")]),s._v(" "),t("p",[t("code",[s._v("git branch [--list]")]),s._v(", 查看本地分支, 当前分支会用"),t("code",[s._v("*")]),s._v("标注")]),s._v(" "),t("h3",{attrs:{id:"查看本地分支的最后提交"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看本地分支的最后提交"}},[s._v("#")]),s._v(" 查看本地分支的最后提交")]),s._v(" "),t("p",[t("code",[s._v("git branch -v")]),s._v(", 可以查看本地分支的最后一次提交信息, 以及和远程镜像分支的对比")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -v\n\nmaster                   807c693 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("\nmaster1                  807c693 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ahead "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(", behind "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("\nmaster_1                 7f3c1a9 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"查看本地分支的upstream关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看本地分支的upstream关系"}},[s._v("#")]),s._v(" 查看本地分支的upstream关系")]),s._v(" "),t("p",[t("code",[s._v("git branch -vv")]),s._v(", 在"),t("code",[s._v("git branch -v")]),s._v("的基础上还标注了分支的上游分支")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -vv\n\nmaster1                  807c693 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("origin/master_2: ahead "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(", behind "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("\nmaster_1                 7f3c1a9 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("\nmaster_2                 f99f3b8 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("另外一种查看方法是看"),t("code",[s._v("config")]),s._v("文件的branch配置")]),s._v(" "),t("h3",{attrs:{id:"查看合并-未合并的分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看合并-未合并的分支"}},[s._v("#")]),s._v(" 查看合并/未合并的分支")]),s._v(" "),t("p",[t("code",[s._v("git branch (--merged=SHA-1(HEAD) | --merged SHA-1(HEAD))")])]),s._v(" "),t("p",[s._v("查看已经合并到"),t("code",[s._v("SHA-1(HEAD)")]),s._v("上的分支")]),s._v(" "),t("p",[t("code",[s._v("SHA-1(HEAD)")]),s._v("可以是一个具体的"),t("code",[s._v("SHA-1")]),s._v("也可以是能够索引到"),t("code",[s._v("SHA-1")]),s._v("的关键字, 不指定是"),t("code",[s._v("HEAD")])]),s._v(" "),t("p",[s._v("其逻辑就是递归"),t("code",[s._v("SHA-1(HEAD)")]),s._v("的"),t("code",[s._v("parent")]),s._v("属性, 看这条"),t("code",[s._v("parent chain")]),s._v("上有那些分支索引的最新提交")]),s._v(" "),t("p",[t("code",[s._v("git branch (--no-merged=SHA-1(HEAD) | --no-merged SHA-1(HEAD))")])]),s._v(" "),t("p",[s._v("查看未合并到"),t("code",[s._v("SHA-1(HEAD)")]),s._v("上的分支")]),s._v(" "),t("h3",{attrs:{id:"删除分支"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除分支"}},[s._v("#")]),s._v(" 删除分支")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("删除远程分支的镜像")])])]),s._v(" "),t("p",[t("code",[s._v("git branch -d -r origin/<branch_name>")])]),s._v(" "),t("p",[s._v("会删除"),t("code",[s._v("refs/remotes/origin/branch_name")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("- 注意")]),s._v(" "),t("p",[t("code",[s._v("git branch -d -r refs/remotes/origin/branch_name")]),s._v(" 不能删除镜像")]),s._v(" "),t("p",[s._v("这让我很困惑")]),s._v(" "),t("p",[s._v("因为"),t("code",[s._v("origin/branch_name")]),s._v("实际上是"),t("code",[s._v("refs/remotes/origin/branch_name")]),s._v("的缩写")]),s._v(" "),t("p",[s._v("但是这里就是只能用缩写 😢")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("删除本地分支")])])]),s._v(" "),t("p",[t("code",[s._v("git branch (-d | -D) <not_current_branch_name>")])]),s._v(" "),t("p",[s._v("删除非当前分支的本地分支")]),s._v(" "),t("p",[t("code",[s._v("-D")]),s._v("表示强制删除, 如果待删除的分支没有合并到当前分支上需要指定")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# master")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout -b dev_1\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d dev1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# error dev1还未合并到当前分支")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -D dev1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# success")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("检测是否合并的逻辑就是递归"),t("code",[s._v("commit-SHA-1")]),s._v("的"),t("code",[s._v("parent chain")]),s._v("看是否存在"),t("code",[s._v("refs/heads/dev1")]),s._v("索引的"),t("code",[s._v("commit-SHA-1")])])])}),[],!1,null,null,null);a.default=n.exports}}]);