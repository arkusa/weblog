(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{392:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" COOKIE")]),t._v(" "),a("h2",{attrs:{id:"cookieè§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookieè§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[t._v("#")]),t._v(" Cookieè§£å†³äº†ä»€ä¹ˆé—®é¢˜")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“"),a("strong",[t._v("HTTP")]),t._v("åè®®æ˜¯"),a("strong",[t._v("æ— çŠ¶æ€")]),t._v("çš„")]),t._v(" "),a("p",[a("strong",[t._v("Cookie")]),t._v("æ˜¯ä¸ºäº†è§£å†³æŸäº›åœºæ™¯(ç”±äº"),a("strong",[t._v("æ— çŠ¶æ€")]),t._v("ç‰¹æ€§, å¯¼è‡´ä¸èƒ½æ»¡è¶³éœ€æ±‚)è€Œè¯ç”Ÿ")]),t._v(" "),a("p",[t._v("æ¯”å¦‚: "),a("strong",[t._v("å…å¯†ç™»é™†")])]),t._v(" "),a("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯æ— çŠ¶æ€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯æ— çŠ¶æ€"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯æ— çŠ¶æ€?")]),t._v(" "),a("p",[t._v("ä¸¾ä¸ªğŸŒ°")]),t._v(" "),a("p",[a("strong",[t._v("ClientA")]),t._v("å‘"),a("strong",[t._v("Server")]),t._v("å‘é€äº†2ä¸ª"),a("strong",[t._v("HTTP")]),t._v("è¯·æ±‚, "),a("strong",[t._v("Server")]),t._v("åªèƒ½æ”¶åˆ°2ä¸ªè¯·æ±‚, ä½†å´ä¸çŸ¥é“è¿™2ä¸ªè¯·æ±‚æ¥è‡ªäº"),a("strong",[t._v("ClientA")]),t._v(". è¿™å°±æ˜¯"),a("strong",[t._v("æ— çŠ¶æ€")]),t._v("çš„å«ä¹‰")]),t._v(" "),a("p",[t._v("æ¯”å¦‚æ‰“å¼€åŒä¸€ä¸ªç½‘å€, ä»»ä½•äººè·å¾—çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„, æ²¡æœ‰çŠ¶æ€çš„åŒºåˆ†")]),t._v(" "),a("h3",{attrs:{id:"ä¸ºä»€ä¹ˆhttpè¢«è®¾è®¡ä¸ºæ— çŠ¶æ€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆhttpè¢«è®¾è®¡ä¸ºæ— çŠ¶æ€"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆHTTPè¢«è®¾è®¡ä¸ºæ— çŠ¶æ€?")]),t._v(" "),a("p",[t._v("è¿™ä¹ˆè®¾è®¡çš„ç›®çš„åœ¨äºç¼“è§£"),a("strong",[t._v("server")]),t._v("å‹åŠ›")]),t._v(" "),a("p",[t._v("ç”±äº"),a("code",[t._v("web")]),t._v("è¯·æ±‚å…·æœ‰çªå‘æ€§, å¦‚æœè¦è®©"),a("strong",[t._v("HTTP")]),t._v("åè®®æ˜¯æœ‰çŠ¶æ€çš„, é‚£å°±è¦è®©"),a("strong",[t._v("clinet")]),t._v("å’Œ"),a("strong",[t._v("server")]),t._v("ä¿æŒä¼šè¯çŠ¶æ€. å°±åƒæ‰“ç”µè¯ä¸€æ ·, å¦‚æœå¤šä¸ªäººåŒæ—¶ç»™ä½ æ‰“ğŸ“±, é‚£ä¸€å®šä¼šæœ‰äººå¤„äºå¿™çº¿çŠ¶æ€")]),t._v(" "),a("p",[a("strong",[t._v("server")]),t._v("ä¹Ÿæ˜¯ä¸€æ ·")]),t._v(" "),a("p",[t._v("ä¸ºäº†å¤„ç†é«˜å¹¶å‘, "),a("strong",[t._v("HTTP")]),t._v("åè®®è¢«è®¾è®¡ä¸º"),a("strong",[t._v("æ— çŠ¶æ€")])]),t._v(" "),a("h3",{attrs:{id:"cookieçš„è¯ç”Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookieçš„è¯ç”Ÿ"}},[t._v("#")]),t._v(" Cookieçš„è¯ç”Ÿ")]),t._v(" "),a("p",[t._v("åœ¨"),a("code",[t._v("web")]),t._v("åˆæœŸè¿˜å¥½, ä½†æ˜¯éšç€"),a("code",[t._v("web")]),t._v("çš„é«˜é€Ÿå‘å±•, è¶Šæ¥è¶Šå¤šçš„åœºæ™¯éœ€è¦"),a("strong",[t._v("server")]),t._v("çŸ¥é“è¯·æ±‚å‘é€æ–¹çš„çŠ¶æ€")]),t._v(" "),a("p",[t._v("æ¯”å¦‚: "),a("strong",[t._v("ç”¨æˆ·çš„ç™»é™†æ€")])]),t._v(" "),a("p",[t._v("å®ç°è¿™ç§"),a("strong",[t._v("case")]),t._v("ä¸ä¸€å®šè¦ä¾èµ–äºåè®®ç»´åº¦çš„æ‰©å±•. åœ¨ç³»ç»Ÿç»´åº¦, ä¹Ÿæ»¡è¶³å®ç°æ¡ä»¶")]),t._v(" "),a("p",[t._v("e.g.")]),t._v(" "),a("p",[t._v("å¯ä»¥åœ¨ç™»é™†æ¥å£ä¸‹å‘ä¸€äº›"),a("code",[t._v("userId")]),t._v("ç­‰çš„ä¿¡æ¯, ç„¶ååœ¨åç»­æ¥å£ä¸­éƒ½å°†è¿™äº›ä¿¡æ¯ä¼ ç»™"),a("strong",[t._v("server")]),t._v(", è¿™æ ·å°±åœ¨ç³»ç»Ÿç»´åº¦è®©"),a("code",[t._v("web")]),t._v("å˜å¾—æœ‰çŠ¶æ€")]),t._v(" "),a("p",[t._v("ä½†æ˜¯è¿™ç§æ–¹æ¡ˆæœ‰ä¸€ä¸ªä¸å¯å¿½è§†çš„é—®é¢˜, ä¸‹å‘ä¸‹æ¥çš„ä¿¡æ¯åªåœ¨å½“å‰ä¼šè¯ä¸­èƒ½è·å–åˆ°, ç¼ºå°‘"),a("strong",[t._v("æœ¬åœ°å­˜å‚¨")]),t._v(", æ¯æ¬¡ç”¨æˆ·è®¿é—®é¡µé¢éƒ½éœ€è¦ç™»é™†, ä¸èƒ½åšåˆ°"),a("strong",[t._v("ç™»é™†æ€çš„æŒä¹…åŒ–")]),t._v("("),a("code",[t._v("web storage")]),t._v("æ˜¯"),a("code",[t._v("h5")]),t._v("æå‡ºçš„æ¦‚å¿µ)")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("ä¸ºäº†å½»åº•è§£å†³è¿™ç±»"),a("strong",[t._v("case")]),t._v(", "),a("strong",[t._v("HTTP")]),t._v("åè®®æ‰©å±•äº†"),a("strong",[t._v("Cookie")]),t._v("è¿™ä¸€æ¦‚å¿µ")]),t._v(" "),a("p",[a("strong",[t._v("Cookie")]),t._v("è¢«è®¾è®¡ä¸º, å¯ä»¥ç”±"),a("strong",[t._v("server")]),t._v("é€šè¿‡"),a("strong",[t._v("headers")]),t._v("ç›´æ¥è®¾ç½®, åœ¨"),a("strong",[t._v("client")]),t._v("æŒä¹…åŒ–å­˜å‚¨, å¹¶éšç€"),a("strong",[t._v("HTTPè¯·æ±‚")]),t._v("è‡ªåŠ¨å‘é€")]),t._v(" "),a("p",[t._v("ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆä¸ç›´æ¥è®¾è®¡ä¸€ä¸ªæœ¬åœ°å­˜å‚¨çš„APIå‘¢?("),a("code",[t._v("storage")]),t._v(")")]),t._v(" "),a("p",[t._v("è¿™æ˜¯ä¸€ä¸ªè®¾è®¡ä¸Šçš„é—®é¢˜")]),t._v(" "),a("p",[a("strong",[t._v("Cookie")]),t._v("æ˜¯"),a("strong",[t._v("HTTP")]),t._v("åè®®çš„è¡¥å……, æ²¡æœ‰"),a("strong",[t._v("Cookie")]),t._v(", "),a("strong",[t._v("HTTP")]),t._v("åè®®å°±ä¸èƒ½è¦†ç›–åˆ°éœ€è¦çŠ¶æ€æŒä¹…åŒ–çš„"),a("strong",[t._v("case")])]),t._v(" "),a("p",[a("strong",[t._v("storage")]),t._v("æ˜¯å¯ä»¥è§£å†³"),a("strong",[t._v("HTTP")]),t._v("çŠ¶æ€æŒä¹…åŒ–çš„æ‰‹æ®µ. ä½†ä»–èƒ½è§£å†³çš„é—®é¢˜è¿œè¿œè¶…è¿‡äº†"),a("strong",[t._v("çŠ¶æ€æŒä¹…åŒ–")]),t._v(", æœªå…æ€é¸¡ç”¨ç‰›åˆ€, è€Œä¸”ä½¿ç”¨"),a("strong",[t._v("storage")]),t._v("æˆ‘ä»¬éœ€è¦è¿˜éœ€è¦æ‰‹åŠ¨åœ¨æŸäº›æ¥å£å°†ä¿¡æ¯å­˜å…¥"),a("strong",[t._v("storage")]),t._v(", åœ¨æŸäº›æ¥å£å–å‡º"),a("strong",[t._v("storage")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("å°ç¨‹åº, å¿«åº”ç”¨éƒ½ä¸æ”¯æŒ"),a("code",[t._v("cookie")]),t._v(", åªèƒ½é€šè¿‡"),a("code",[t._v("storage")]),t._v("åšç”¨æˆ·çŠ¶æ€çš„æŒä¹…åŒ–")]),t._v(" "),a("p",[t._v("å¿«åº”ç”¨è¿˜æ²¡æœ‰åŒæ­¥è·å¾—"),a("code",[t._v("storage")]),t._v("çš„API, å¦‚æœä¸å¼•å…¥"),a("code",[t._v("async/awiat")]),t._v("çš„polyfill, å°±ä¼šé™·å…¥æ·±æ·±çš„"),a("code",[t._v("callback hell")])])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("åŒæ—¶"),a("strong",[t._v("Cookie")]),t._v("çš„è®¾è®¡è¿˜æœ‰ä»¥ä¸‹ä¼˜åŠ¿")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å¯ä»¥ç”±æœåŠ¡ç«¯é…ç½®")])])]),t._v(" "),a("p",[t._v("æœåŠ¡ç«¯é…ç½®"),a("code",[t._v("set-cookie")]),t._v("header, æµè§ˆå™¨æ ¹æ®"),a("code",[t._v("set-cookie")]),t._v("çš„å€¼ç›´æ¥å­˜å‚¨åœ¨æœ¬åœ°, ä¸éœ€è¦è„šæœ¬å‚ä¸å­˜å‚¨")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("è‡ªåŠ¨å‘é€")])])]),t._v(" "),a("p",[t._v("åœ¨å‘é€è¯·æ±‚æ—¶, ä¼šå°†å½“å‰åŸŸä¸‹çš„"),a("strong",[t._v("Cookie")]),t._v("ä¸€å¹¶å‘é€, ä¸éœ€è¦è„šæœ¬å‚ä¸å‘é€")]),t._v(" "),a("p",[a("strong",[t._v("Cookie")]),t._v("æ˜¯æµè§ˆå™¨å’Œ"),a("strong",[t._v("server")]),t._v("é—´çš„çº¦å®š, ä¸ç”¨å‰ç«¯è„šæœ¬å˜æ›´, å°±å¯ä»¥æ»¡è¶³"),a("strong",[t._v("HTTP")]),t._v("æœ‰çŠ¶æ€")]),t._v(" "),a("p",[a("strong",[t._v("Storage")]),t._v("éœ€è¦æµè§ˆå™¨, "),a("strong",[t._v("server")]),t._v("å’Œ"),a("strong",[t._v("javaScript")]),t._v("å…±åŒä½œç”¨, æ‰å¯ä»¥æ»¡è¶³"),a("strong",[t._v("HTTP")]),t._v("æœ‰çŠ¶æ€")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("å½“ç„¶è¿™ç§è®¾è®¡ä¹Ÿå¯¼è‡´äº†éšç§çš„æ³„æ¼")]),t._v(" "),a("p",[t._v("ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™ç±»çš„åœºæ™¯: ä½ åœ¨æŸç«™æœç´¢äº†ä¸€äº›å•†å“. åœ¨è®¿é—®å…¶ä»–ç«™çš„æ—¶å€™, æœ‰æ—¶è¿™ç±»å•†å“å°±å¤„äºæ¨èä½ä¸Š.")]),t._v(" "),a("p",[t._v("è¿™å¯ä¸ä»…ä»…æ˜¯å·§åˆ, è€Œæ˜¯åŸºäº"),a("strong",[t._v("Cookie")]),t._v("è¿½è¸ªäº†ç”¨æˆ·è¡Œä¸º")]),t._v(" "),a("h2",{attrs:{id:"cookieçš„ç‰¹æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookieçš„ç‰¹æ€§"}},[t._v("#")]),t._v(" Cookieçš„ç‰¹æ€§")]),t._v(" "),a("p",[t._v("åƒä¸Šé¢æåˆ°çš„"),a("strong",[t._v("Cookie")]),t._v("å…·æœ‰å¦‚ä¸‹ç‰¹æ€§")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("æœ¬åœ°æŒä¹…åŒ–(4kb)")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å¯ä»¥ç”±æœåŠ¡ç«¯é…ç½®, æµè§ˆå™¨è‡ªåŠ¨ç”Ÿæ•ˆ")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ä¼´éšå½“å‰åŸŸåçš„HTTPè¯·æ±‚è‡ªåŠ¨å‘é€")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å—åŒæºç­–ç•¥ä¿æŠ¤")])]),t._v(" "),a("p",[t._v("åªèƒ½å½“å‰åŸŸåä¸‹çš„è¯·æ±‚å’Œè„šæœ¬æ‰èƒ½è·å¾—å½“å‰åŸŸåçš„"),a("strong",[t._v("Cookie")])])])]),t._v(" "),a("h2",{attrs:{id:"cookieçš„å±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookieçš„å±æ€§"}},[t._v("#")]),t._v(" Cookieçš„å±æ€§")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Expires/Max-Age")])])]),t._v(" "),a("p",[t._v("è®¾ç½®"),a("strong",[t._v("Cookie")]),t._v("çš„æœ‰æ•ˆæœŸ, é»˜è®¤æ˜¯"),a("code",[t._v("Session")]),t._v(". å½“æµè§ˆå™¨å½»åº•å…³é—­(è¿›ç¨‹è¢«æ€æ­»), è¿™ä¸ª"),a("strong",[t._v("Cookie")]),t._v("å°±ä»è¯¥åŸŸåä¸‹è¢«åˆ é™¤")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),a("p",[t._v("å…³é—­å½“å‰tabé¡µ, å…³é—­å½“å‰çª—å£, éƒ½ä¸ä¼šå°†"),a("code",[t._v("Session")]),t._v("çŠ¶æ€çš„"),a("strong",[t._v("Cookie")]),t._v("åˆ é™¤, é™¤éå½»åº•æ€æ­»Chromeè¿›ç¨‹")])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("Expires")]),t._v("çš„å€¼æ˜¯"),a("code",[t._v("UTC ä¸–ç•Œæ ‡å‡†æ—¶é—´")]),t._v("æ ¼å¼çš„æ—¶é—´ç‚¹")]),t._v(" "),a("p",[t._v("æˆ‘å›½ä½¿ç”¨çš„æ˜¯"),a("strong",[t._v("ä¸œå…«åŒº")]),t._v("æ—¶é—´, æ¯”"),a("strong",[t._v("UTC ä¸–ç•Œæ ‡å‡†æ—¶é—´")]),t._v("æå‰äº†8ä¸ªå°æ—¶")]),t._v(" "),a("p",[t._v("ç›´æ¥ä½¿ç”¨"),a("code",[t._v("new Date().toString()")]),t._v("å¾—åˆ°çš„æ—¶é—´æ˜¯ä¸­å›½æ ‡å‡†æ—¶é—´("),a("strong",[t._v("ä¸œå…«åŒºæ—¶é—´")]),t._v(")")]),t._v(" "),a("p",[t._v("å¦‚æœæˆ‘ä»¬ç›´æ¥")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("cookie_expires=expires; Expires=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("è¿™ä¸ª"),a("strong",[t._v("Cookie")]),t._v("å°†ä¼šåœ¨8ä¸ªå°æ—¶åè¿‡æœŸ")]),t._v(" "),a("p",[t._v("æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨"),a("code",[t._v("new Date().toUTCString()")])]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("cookie_expires=expires; Expires=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUTCString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™ç›¸å½“äºæ²¡è®¾ç½®Cookie, å› ä¸ºè®¾ç½®äº†ä¸€ä¸ªé”™è¯¯æ—¶é—´ç‚¹çš„Cookie, å½“å‰æ—¶é—´çš„UTCæ ¼å¼ï¼Œå·²ç»è¿‡å»äº†")]),t._v("\n\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("cookie_expires=expires; Expires=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUTCString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€å¤©åè¿‡æœŸ")]),t._v("\n\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("cookie_expires=expires; Expires=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 32å°æ—¶åè¿‡æœŸ")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),a("p",[t._v("åœ¨æœåŠ¡ç«¯è®¾ç½®Cookieå®é™…ä¸Šæ˜¯ç”¨æœåŠ¡ç«¯çš„çš„æ—¶é—´å’Œå®¢æˆ·ç«¯çš„æ—¶é—´å¯¹æ¯”, å­˜åœ¨è¯¯å·®")])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("Max-Age")]),t._v("çš„å€¼æ˜¯ä¸€æ®µæ—¶é—´, ä»¥"),a("code",[t._v("s")]),t._v("ä¸ºå•ä½, "),a("code",[t._v("cookie_max-age=max-age; Max-Age=10")]),t._v("æ„æ€æ˜¯"),a("code",[t._v("cookie_max-age")]),t._v("å°†åœ¨10ç§’åè¿‡æœŸ, ä¸"),a("code",[t._v("Expires")]),t._v("ç›¸æ¯”, å…¶åªç”¨å®¢æˆ·ç«¯æ—¶é—´åšæ¯”è¾ƒ, æ²¡æœ‰è¯¯å·®")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_max-age=max-age; Max-Age=10'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("æ³¨æ„")]),t._v(" "),a("p",[a("code",[t._v("Max-Age")]),t._v("ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè´Ÿå€¼")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("ç»™å·²ç»å­˜åœ¨çš„"),a("strong",[t._v("Cookie")])]),t._v(" "),a("p",[t._v("è®¾ç½®è´Ÿçš„"),a("code",[t._v("Max-Age")]),t._v("ç›¸å½“äºåˆ é™¤è¿™ä¸ª"),a("strong",[t._v("Cookie")])]),t._v(" "),a("p",[t._v("è®¾ç½®è¿‡æœŸ(å®¢æˆ·ç«¯æ ¹æ®æœ¬åœ°æ—¶é—´åˆ¤æ–­æ˜¯ä¸æ˜¯è¿‡æœŸ)çš„"),a("code",[t._v("Expires")]),t._v("ç›¸å½“äºè®¾ç½®äº†"),a("code",[t._v("Session")]),t._v("çŠ¶æ€çš„"),a("strong",[t._v("Cookie")]),t._v("(è¿™é‡Œæˆ‘åªæµ‹è¯•äº†chrome)")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("ç»™ä¸å­˜åœ¨çš„"),a("strong",[t._v("Cookie")])]),t._v(" "),a("p",[t._v("è®¾ç½®è´Ÿçš„"),a("code",[t._v("Max-Age")]),t._v("å’Œè¿‡æœŸçš„"),a("code",[t._v("Expires")]),t._v("éƒ½ç›¸å½“äºæ²¡æœ‰è®¾ç½®è¿™ä¸ª"),a("strong",[t._v("Cookie")])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("å¦‚æœä½ æƒ³åˆ é™¤æŸä¸ª"),a("strong",[t._v("Cookie")]),t._v(", è¯·ä½¿ç”¨"),a("code",[t._v("Max-Age")])])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Domain")])])]),t._v(" "),a("p",[a("strong",[t._v("Domain")]),t._v("è¡¨æ˜äº†å½“å‰"),a("strong",[t._v("Cookie")]),t._v("è¢«å­˜æ”¾åˆ°é‚£ä¸ªåŸŸåä¸‹, é»˜è®¤æ˜¯å½“å‰åŸŸå"),a("code",[t._v("window.location.host")])]),t._v(" "),a("p",[t._v("ä»–çš„å€¼ä¸èƒ½éšä¾¿è®¾ç½®ï¼Œåªèƒ½æ˜¯ä»¥ä¸‹2ç§")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("å½“å‰åŸŸå")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å½“å‰åŸŸåçš„ä¸€çº§åŸŸå")])])])]),t._v(" "),a("p",[t._v("å¦‚æœæ˜¯"),a("strong",[t._v("å½“å‰åŸŸå")]),t._v(" åˆ™åªèƒ½åœ¨å½“å‰åŸŸä¸‹è¢«å‘é€, å¦‚æœæ˜¯"),a("strong",[t._v("å½“å‰åŸŸåçš„ä¸€çº§åŸŸå")]),t._v("åˆ™åœ¨å…¶å­åŸŸä¸‹ä¹Ÿä¼šå‘é€è¿™ä¸ª"),a("strong",[t._v("Cookie")])]),t._v(" "),a("p",[t._v("ğŸŒ°")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_domain=domain; Domain=a.cookie.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åªåœ¨a.cookie.comä¸‹çš„è¯·æ±‚ä¼šå‘é€è¿™ä¸ªcookie")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_domain=domain; Domain=.(å¯çœç•¥)cookie.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨a.cookie.com, b.cookie.com, c.cookie.comä¸‹éƒ½ä¼šå‘é€è¿™ä¸ªcookie")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("strong",[t._v("å½“å‰åŸŸåçš„ä¸€çº§åŸŸå")]),t._v("ä¸€èˆ¬åº”ç”¨åœ¨çˆ¶/å­åŸŸåé—´ç”¨æˆ·ç™»é™†å…±äº«. åœ¨"),a("code",[t._v("a.cookie.com")]),t._v("ä¸‹ç™»é™†, åœ¨"),a("code",[t._v("b.cookie.com")]),t._v("ä¸‹å°±ä¸éœ€è¦é¢å¤–ç™»é™†äº†")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Path")])])]),t._v(" "),a("p",[a("strong",[t._v("Domain")]),t._v("è¡¨ç¤ºçš„æ˜¯"),a("strong",[t._v("Cookie")]),t._v("çš„å­˜æ”¾åŸŸå, "),a("strong",[t._v("Path")]),t._v("åˆ™è¡¨ç¤º"),a("strong",[t._v("Cookie")]),t._v("çš„å­˜æ”¾è·¯å¾„, é»˜è®¤æ˜¯"),a("strong",[t._v("å½“å‰ç½‘é¡µçš„è·¯å¾„")])]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://a.cookie.com/weblog/net/http/cookie.html")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/cookie/get'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_path=path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­¤æ—¶Cookieçš„Pathä¸º /weblog/net/http")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[a("strong",[t._v("Path")]),t._v("çš„åŒ¹é…è§„åˆ™ä¸æ˜¯å®Œå…¨åŒ¹é…, å³ä¸æ˜¯è¿™æ ·çš„"),a("code",[t._v("/^Path$/")]),t._v(", è€Œæ˜¯"),a("code",[t._v("/^Path/")])]),t._v(" "),a("p",[t._v("ğŸŒ°")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰ä¸»ç«™a.cookie.com")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_path=path; Path=/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å‰åŸŸåä¸‹çš„æ‰€æœ‰è·¯å¾„éƒ½èƒ½è·å¾—è¿™ä¸ªcookie")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_path1=path1; Path=/path1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a.cookie.com/path1 ä¸‹çš„æ‰€æœ‰è·¯å¾„(åŒ…æ‹¬è‡ªå·±)éƒ½èƒ½è·å¾—è¿™ä¸ªcookie a.cookie.com/path1/1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½†æ˜¯a.cookie.com/path2 åˆ™ä¸èƒ½è·å¾—è¿™ä¸ªcookie")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("HttpOnly")])])]),t._v(" "),a("p",[t._v("åé¢ä¼šæåˆ°é€šè¿‡"),a("code",[t._v("javaScript")]),t._v("è„šæœ¬æˆ‘ä»¬ä¹Ÿèƒ½è¯»å–åˆ°"),a("strong",[t._v("Cookie")]),t._v(", å¦‚æœé­å—åˆ°"),a("code",[t._v("XSS")]),t._v("æ”»å‡», æˆ‘ä»¬çš„"),a("strong",[t._v("Cookie")]),t._v("å°±å¯èƒ½ä¼šæ³„æ¼")]),t._v(" "),a("p",[a("strong",[t._v("HttpOnly")]),t._v("å¯ä»¥è®©å½“å‰"),a("strong",[t._v("Cookie")]),t._v("ä¸èƒ½é€šè¿‡è„šæœ¬è·å¾—åˆ°, åªèƒ½é€šè¿‡"),a("strong",[t._v("HTTP")]),t._v("è¯·æ±‚å‘é€")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_httpOnly=httpOnly; HttpOnly'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("Secure")])])]),t._v(" "),a("p",[a("strong",[t._v("Secure")]),t._v("è®©å½“å‰"),a("strong",[t._v("Cookie")]),t._v("åªèƒ½é€šè¿‡"),a("strong",[t._v("HTTPS")]),t._v("åè®®è¢«å‘é€")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cookie_secure=secure; Secure'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("SameSite")])])]),t._v(" "),a("p",[t._v("è¿™ä¸ªå±æ€§æ¥æºäº"),a("strong",[t._v("Chrome")]),t._v(", å› ä¸º"),a("strong",[t._v("Chrome")]),t._v("æ­£å¤„äºå…¨é¢ç¦ç”¨ç¬¬ä¸‰æ–¹"),a("strong",[t._v("Cookie")]),t._v("çš„è¿‡æ¸¡é˜¶æ®µ")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å‰é¢æåˆ°çš„"),a("strong",[t._v("é’ˆå¯¹äºCookieçš„ç”¨æˆ·è¿½è¸ª")]),t._v(", å…¶å¤§æ¦‚é€»è¾‘æ˜¯å°†ç”¨æˆ·è¡Œä¸ºå­˜å‚¨åˆ°ç¬¬ä¸‰æ–¹åŸŸåçš„"),a("strong",[t._v("Cookie")]),t._v("ä¸‹, ç„¶ååœ¨å…¶ä»–ç«™ç‚¹, è·å¾—è¿™ä¸ª"),a("strong",[t._v("ç¬¬ä¸‰æ–¹åŸŸåä¸‹çš„Cookie")]),t._v(", å°±å¾—åˆ°äº†ç”¨æˆ·çš„è¡Œä¸º")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("- æ³¨æ„")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“"),a("strong",[t._v("Cookie")]),t._v("å—åŒæºç­–ç•¥ä¿æŠ¤, é‚£è¦å¦‚ä½•å­˜/å–ç¬¬ä¸‰æ–¹åŸŸåä¸‹çš„"),a("strong",[t._v("Cookie")]),t._v("å‘¢?")]),t._v(" "),a("p",[t._v("å‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡, "),a("strong",[t._v("Cookie")]),t._v("å¯ä»¥ç”±æœåŠ¡ç«¯è®¾ç½®")]),t._v(" "),a("p",[t._v("è¿™æ„å‘³ç€")]),t._v(" "),a("p",[t._v("å¦‚æœæˆ‘ä»¬åœ¨"),a("code",[t._v("a.cookie.com")]),t._v("ä¸‹ï¼Œè¯·æ±‚äº†"),a("code",[t._v("b.cors.com")]),t._v("ä¸‹çš„æŸä¸ªèµ„æº/æ¥å£, å¹¶ä¸”è¿™ä¸ªæ¥å£é…ç½®äº†ç›¸åº”çš„"),a("strong",[t._v("Cookie")]),t._v(", é‚£ä¹ˆè¿™ä¸ª"),a("strong",[t._v("Cookie")]),t._v("å°±ä¼šè¢«ç§åˆ°"),a("code",[t._v("b.cors.com")]),t._v("ä¸‹, å³ä½¿æˆ‘ä»¬æ²¡æœ‰è®¿é—®è¿‡"),a("code",[t._v("b.cors.com")])]),t._v(" "),a("p",[t._v("åŸºäºæ­¤, æˆ‘ä»¬å¯ä»¥åœ¨ç‚¹å‡»å•†å“(a.cookie.comä¸‹)çš„æ—¶å€™åƒb.cors.comçš„æŸä¸ªæ¥å£å‘é€è¯·æ±‚çš„æ—¶å€™å¸¦ä¸Šè¿™ä¸ªå•†å“çš„hash, ç„¶åè¿™ä¸ªæ¥å£åˆå°†è¿™ä¸ªhashè®¾ç½®åˆ°"),a("code",[t._v("set-cookie")]),t._v("ä¸Š, è¿™æ ·è¿™ä¸ªhashå°±è¢«å­˜æ”¾åˆ°"),a("code",[t._v("b.cors.com")]),t._v("çš„"),a("strong",[t._v("Cookie")]),t._v("ä¸Šäº†")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a.cookie.com")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clickProduct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("productCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("md5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("productCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" img "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  img"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://b.cors.com/user/product?product='")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// b.cors.com/user/product")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handlerProduct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("__product_hash=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("hash"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("é‚£å¦‚ä½•å–å‘¢?")]),t._v(" "),a("p",[t._v("å‰é¢æˆ‘ä»¬ä¹Ÿæè¿‡"),a("strong",[t._v("Cookie")]),t._v("ä¼šéšç€HTTPè‡ªåŠ¨å‘é€")]),t._v(" "),a("p",[t._v("æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨"),a("code",[t._v("c.co.com")]),t._v("ä¸‹è·¨åŸŸè®¿é—®"),a("code",[t._v("b.cors.com/user/product/parse")]),t._v(", åˆ"),a("strong",[t._v("server")]),t._v("å¸®æˆ‘ä»¬è§£æå‡º"),a("strong",[t._v("Cookie")])]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// c.co.com")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonpCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå¤„ç†ç¬¬ä¸‰æ–¹çš„cookie")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserProduct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" img "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  img"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("https://b.cors.com/user/product/parse?jsonp=jsonpCallback")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// b.cors.com/user/product/parse")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseProduct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" cookie "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" reg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/(?<=jsonp=)[^&]+/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("jsonp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("math")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("jsonp"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("cookie"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(")\n  ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/javascript'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br")])]),a("p",[t._v("è¿™æ ·æˆ‘ä»¬å°±æ‰“ç ´äº†"),a("strong",[t._v("Cookie")]),t._v("çš„åŒæºç­–ç•¥, å¯ä»¥è¿›è¡Œ"),a("strong",[t._v("Cookie")]),t._v("è¿½è¸ª")])]),t._v(" "),a("p",[t._v("è¿™æ˜¯ç”±äºè¿™ç§æ³„æ¼éšç§çš„"),a("strong",[t._v("case")]),t._v(", "),a("strong",[t._v("firefox")]),t._v(", "),a("strong",[t._v("safari")]),t._v("å·²ç»ç¦ç”¨äº†ç¬¬ä¸‰æ–¹çš„"),a("strong",[t._v("Cookie")])]),t._v(" "),a("p",[t._v("å³åœ¨å½“å‰åŸŸåä¸‹ï¼Œåªèƒ½è®¾ç½®å’Œä¸Šä¼ å½“å‰åŸŸåçš„"),a("strong",[t._v("Cookie")]),t._v(", å³ä½¿ä½ åœ¨æ–‡æ¡£ä¸­è¯·æ±‚äº†ç¬¬ä¸‰æ–¹èµ„æº, æµè§ˆå™¨ä¹Ÿä¸ä¼šä¸ºä½ ä¸Šä¼ å’Œå­˜å‚¨ç¬¬ä¸‰æ–¹çš„"),a("strong",[t._v("Cookie")])]),t._v(" "),a("p",[a("strong",[t._v("Chrome")]),t._v("äº2019å¹´å®£å¸ƒå°†åœ¨2å¹´å†…å®Œå…¨ç¦ç”¨"),a("strong",[t._v("ç¬¬ä¸‰æ–¹Cookie")])]),t._v(" "),a("p",[t._v("åœ¨è¿™æœŸé—´å¯ä»¥ä½¿ç”¨"),a("strong",[t._v("SameSite")]),t._v("å±æ€§, ç”±ç½‘ç«™é…ç½®æ˜¯å¦ç¦ç”¨"),a("strong",[t._v("ç¬¬ä¸‰æ–¹Cookie")])]),t._v(" "),a("p",[t._v("å®ƒæœ‰3ä¸ªå€¼")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("None")])])]),t._v(" "),a("p",[t._v("å’Œæ­£å¸¸ä¸€æ ·, å¯ä»¥è‡ªç”±è®¾ç½®"),a("strong",[t._v("Cookie")]),t._v(", éœ€è¦æ³¨æ„å…¶å¿…é¡»å’Œ"),a("strong",[t._v("Secure")]),t._v("ä¸€èµ·ä½¿ç”¨, å¦åˆ™æ— æ•ˆ")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[t._v("Lax")]),t._v("(é»˜è®¤)")])]),t._v(" "),a("p",[a("strong",[t._v("Chrome")]),t._v("å°†é»˜è®¤å€¼ç”±"),a("strong",[t._v("None")]),t._v("æ›´æ–°ä¸º"),a("strong",[t._v("Lax")])]),t._v(" "),a("p",[t._v("å…¶åªåœ¨æŸäº›æ—¶å€™å‘é€/è®¾ç½®ç¬¬ä¸‰æ–¹Cookie, "),a("code",[t._v('<a href="" />')]),t._v("è·³è½¬, "),a("code",[t._v('<link ref="preload" >')]),t._v("é¢„åŠ è½½å’Œ"),a("code",[t._v("get")]),t._v("è¡¨å•(è¦æ³¨æ„è¿™é‡Œä¸æ˜¯getè¯·æ±‚)")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("strong",[t._v("Strict")])])]),t._v(" "),a("p",[t._v("ä¸å‘é€/è®¾ç½®"),a("strong",[t._v("ç¬¬ä¸‰æ–¹Cookie")])]),t._v(" "),a("p",[t._v("æ‰€ä»¥å¦‚æœç°åœ¨éœ€è¦åš"),a("strong",[t._v("Cookieè¿½è¸ª")]),t._v(", æˆ‘ä»¬é’ˆå¯¹åœ¨"),a("strong",[t._v("Chrome")]),t._v("å¹¶ä¸”è®¾ç½®"),a("code",[t._v("SameSite=None; Secure")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("__Secure- å’Œ __Host- å‰ç¼€")])])]),t._v(" "),a("p",[t._v("å¦‚æœä½ çš„"),a("strong",[t._v("Cookie")]),t._v("å€¼æ˜¯"),a("code",[t._v("__Secure-")]),t._v("æˆ–è€…"),a("code",[t._v("__Host-")]),t._v(", é‚£ä¹ˆå½“å‰"),a("strong",[t._v("Cookie")]),t._v("å¿…é¡»å…·æœ‰æŸäº›å±æ€§")]),t._v(" "),a("p",[a("code",[t._v("__Secure-")]),t._v(": è¿™ä¸ª"),a("strong",[t._v("Cookie")]),t._v("å¿…é¡»é…ç½®"),a("code",[t._v("Secure")])]),t._v(" "),a("p",[a("code",[t._v("__Host-")]),t._v(": è¿™ä¸ª"),a("strong",[t._v("Cookie")]),t._v("å¿…é¡»é…ç½®"),a("code",[t._v("Secure")]),t._v(", å¹¶ä¸”"),a("strong",[t._v("Domain")]),t._v("å¿…é¡»ä¸º"),a("code",[t._v("window.location.host")]),t._v(", "),a("strong",[t._v("Path")]),t._v("å¿…é¡»ä¸º"),a("code",[t._v("/")])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("åŒæ—¶"),a("strong",[t._v("SameSite")]),t._v("è¿˜èƒ½å¤Ÿé¢„é˜²"),a("strong",[t._v("CSRF")]),t._v("æ”»å‡»")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“"),a("strong",[t._v("CSRF")]),t._v("å°±æ˜¯åœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸Šé€šè¿‡å†’ç”¨ç”¨æˆ·"),a("strong",[t._v("Cookie")]),t._v("ğŸ“ çš„, å¦‚æœç›®æ ‡ç½‘ç«™çš„å…³é”®"),a("strong",[t._v("Cookie")]),t._v("çš„"),a("strong",[t._v("SameSite=!None")]),t._v(", é‚£ä¹ˆè¿™äº›"),a("strong",[t._v("Cookie")]),t._v("å°±ä¸ä¼šåœ¨æ”»å‡»è€…çš„ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸Šè¢«å‘é€, ä»æ ¹æœ¬ä¸Šæœç»äº†"),a("strong",[t._v("CSRF")]),t._v("ğŸ“")]),t._v(" "),a("h2",{attrs:{id:"å¦‚ä½•è®¾ç½®cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•è®¾ç½®cookie"}},[t._v("#")]),t._v(" å¦‚ä½•è®¾ç½®Cookie")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å‰ç«¯")])])]),t._v(" "),a("p",[t._v("åœ¨å‰ç«¯å¯ä»¥é€šè¿‡è„šæœ¬è¯»å–/è®¾ç½®"),a("strong",[t._v("Cookie")]),t._v(", "),a("code",[t._v("document.cookie")])]),t._v(" "),a("p",[a("code",[t._v("document.cookie")]),t._v("æ˜¯ä¸€ä¸ªå±æ€§å­˜å–å™¨("),a("code",[t._v("getter setter")]),t._v("), è€Œä¸æ˜¯ä¸€ä¸ªå±æ€§")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å¯ä»¥ä½¿ç”¨"),a("code",[t._v("Object.definePrototype")]),t._v("æ›´æ”¹å®ƒ")]),t._v(" "),a("p",[t._v("ä½œä¸º"),a("strong",[t._v("getter")]),t._v("æ—¶, å…¶èƒ½å¤Ÿè·å¾—å½“å‰åŸŸåä¸‹çš„æ‰€æœ‰"),a("strong",[t._v("Cookie")]),t._v("(ä¸åŒ…æ‹¬å±æ€§), å¹¶ä¸”ä»¥"),a("code",[t._v("<key>=<value>")]),t._v("çš„å½¢å¼ä»¥"),a("code",[t._v(";")]),t._v("è¿æ¥åˆ°ä¸€èµ·")]),t._v(" "),a("p",[t._v("ä½œä¸º"),a("strong",[t._v("setter")]),t._v("æ—¶, å…¶èƒ½å¤Ÿè®¾ç½®å½“å‰åŸŸåä¸‹çš„"),a("strong",[t._v("Cookie")]),t._v(", ä½†æ˜¯ä¸èƒ½é…ç½®"),a("strong",[t._v("HttpOnly")]),t._v(", åªæœ‰åœ¨"),a("strong",[t._v("https")]),t._v("åè®®ä¸‹, æ‰èƒ½å¤Ÿé…ç½®"),a("strong",[t._v("Secure")])]),t._v(" "),a("p",[t._v("ğŸŒ°")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a.cookie.com")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a=1; HttpOnly'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ— æ•ˆ")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b=1;'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ— æ•ˆ")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'c=1; Domain=cookie.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ— æ•ˆ")]),t._v("\n\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'b=1; c=1'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("ul",[a("li",[a("strong",[t._v("æœåŠ¡ç«¯")])])]),t._v(" "),a("p",[a("strong",[t._v("server")]),t._v("åªéœ€è¦å°†"),a("strong",[t._v("Cookie")]),t._v("è®¾ç½®åˆ°å“åº”å¤´çš„"),a("code",[t._v("headers.Set-Cookie")]),t._v("ä¸Šå°±å¥½äº†")]),t._v(" "),a("p",[t._v("å¦‚æœè¦è·å–å‘é€æ¥çš„"),a("strong",[t._v("Cookie")]),t._v("ä¹Ÿä»è¯·æ±‚å¤´ä¸­è·å¾—å°±å¥½äº†")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" cookie "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Set-Cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a=1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("- æ³¨æ„")]),t._v(" "),a("p",[t._v("åŒä¸€ä¸ªä½ç½®åŒåçš„"),a("strong",[t._v("Cookie")]),t._v("ä¼šå‘ç”Ÿè¦†ç›–")]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a.cookie.com")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a=1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a=2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'a=2'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("éœ€è¦æ³¨æ„"),a("strong",[t._v("åŒä¸€ä¸ªä½ç½®")]),t._v(", å¦‚æœæˆ‘ä»¬å°†åŒåçš„"),a("strong",[t._v("Cookie")]),t._v("å­˜æ”¾åˆ°äº†ä¸åŒçš„Pathä¸‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šçš„åˆ°2ä¸ªåŒåçš„"),a("strong",[t._v("Cookie")])]),t._v(" "),a("div",{staticClass:"language-javaScript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// a.cookie.com/path")]),t._v("\n\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path=1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path=2; Path=/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'path=1; path=2'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])])]),t._v(" "),a("h2",{attrs:{id:"cookieå±å®³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookieå±å®³"}},[t._v("#")]),t._v(" Cookieå±å®³")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("CSRF ğŸ“")])])]),t._v(" "),a("p",[t._v("å…³äº"),a("strong",[t._v("CSRF")]),t._v("çš„å†…å®¹è¯·çœ‹è¿™é‡Œ"),a("RouterLink",{attrs:{to:"/safety/web/csrf.html"}},[t._v("CSRF")])],1),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Cookieç”¨æˆ·è¿½è¸ª")])])]),t._v(" "),a("p",[t._v("å‰é¢æåˆ°è¿‡"),a("strong",[t._v("Cookie")]),t._v("å¯èƒ½è¢«ç”¨æ¥è¿½è¸ªç”¨æˆ·è¡Œä¸º")]),t._v(" "),a("h2",{attrs:{id:"å…¶ä»–cookieé—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–cookieé—®é¢˜"}},[t._v("#")]),t._v(" å…¶ä»–Cookieé—®é¢˜")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æµé‡æŸå¤±")])])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“"),a("strong",[t._v("Cookie")]),t._v("æ˜¯è‡ªåŠ¨éšç€åŸŸåä¸‹çš„è¯·æ±‚å‘é€çš„, è¿™å°±å¯èƒ½é€ æˆæŸå¤±ï¼Œå¯èƒ½æˆ‘ä»¬å¹¶ä¸éœ€è¦"),a("strong",[t._v("Cookie")]),t._v(", ä½†æ˜¯å…¶è‡ªåŠ¨å‘é€ç»™"),a("strong",[t._v("server")]),t._v("äº†")]),t._v(" "),a("p",[t._v("æ¯”å¦‚: é™æ€èµ„æº...")]),t._v(" "),a("p",[t._v("æ‰€ä»¥å¯¹å›¾ç‰‡ç­‰é™æ€èµ„æº, æˆ‘ä»¬ä¸€èˆ¬å°†å…¶æ”¾åˆ°ä¸“é—¨çš„åŸŸå("),a("strong",[t._v("è¿™é‡ŒæŒ‡çš„æ˜¯åŸŸå, ä¸æ˜¯æœºå™¨å“¦")]),t._v(")ä¸‹, ä¸è¿‡ä¸€èˆ¬ä¼ä¸šéƒ½ä¼šå»ºç«‹ä¸“é—¨çš„é™æ€èµ„æºæœåŠ¡å™¨")])])}),[],!1,null,null,null);s.default=e.exports}}]);